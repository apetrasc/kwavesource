<!-- omit in toc -->
# 2025-04-28 kwave simulation tutorial

## 1. ドキュメント作成者

CM) FEL 松原貞徳　(smatsubara@fel.t.u-tokyo.ac.jp)

## 2. 改訂履歴

- 1.0:
  - 作成日時: 2025-04-28 13:28:45
  - 更新内容: 初版作成

## 3. このドキュメントの目次

- [1. ドキュメント作成者](#1-ドキュメント作成者)
- [2. 改訂履歴](#2-改訂履歴)
- [3. 目次](#3-目次)
- [4. 目的・概要](#4-目的概要)
- [5. 前提条件](#5-前提条件)
- [6. 作業完了条件](#6-作業完了条件)
- [7. 作業者](#7-作業者)
- [8. 副作業者 (チェッカー)](#8-副作業者-チェッカー)
- [9. 作業場所](#9-作業場所)
- [10. 作業端末](#10-作業端末)
- [11. 予定作業時間](#11-予定作業時間)
- [12. その他制約事項・備考](#12-その他制約事項備考)
- [13. 参考情報](#13-参考情報)
- [14. 作業実績](#14-作業実績)
  - [14.1. 作業結果](#141-作業結果)
    - [14.1.1. OK or NG](#1411-ok-or-ng)
    - [14.1.2. NGと判断した理由](#1412-ngと判断した理由)
    - [14.1.3. NGとなった原因](#1413-ngとなった原因)
    - [14.1.4. 次回アクション](#1414-次回アクション)
  - [14.2. 作業開始・終了時間](#142-作業開始終了時間)
- [15. 手順書](#15-手順書)
  - [15.1. ログイン [想定作業時間: 3分]](#151-ログイン-想定作業時間-3分)
  - [15.2. スイッチロール [想定作業時間: 3分]](#152-スイッチロール-想定作業時間-3分)

## 4. このドキュメントの目的・概要

エアリフト令和7年度研究目標達成のための参考資料。特に、シミュレーションを行い、必要に応じて動画を作成したり、任意の位置にTransducerを配置できるようになる狙いがある。


シミュレーションのイメージ図は以下の通り。  

![abstruct of simulation](./pictures/multicombined_visualization_transparent.png)

設定するリソースは以下の通り。
matlab 
kwave toolbox
gpu machine 

## 5. 前提条件

- [BacklogのWikiに記載したパラメーターシート](URL)をXXX様にレビューしていただいていること。
- XXX様のSIEM on Amazon ES用のAWSアカウント(`123456789012`)で、作業者の作業用のIAM Roleの作成が完了していること。
- 作業用端末に、[AWS Extend Switch Roles](URL)がインストール済みであり、`cm-XXX-Read`と、`cm-XXX-Admin`にスイッチロールする設定がされていること。

## 6. 作業完了条件

- abstruct of simulationの図を自分で生成し、Transducerを任意の位置に配置したりガラス球の配置を変更できるようになること。
- 作業者及び、副作業者が[BacklogのWikiに記載したパラメーターシート](URL)と実機とを見比べて、誤った設定がされていないと確認できる。

## 7. 作業者

CM) 

## 8. 副作業者 (チェッカー)

CM) 

## 9. 作業場所

東京大学工学部2号館　6階　61A4

## 10. 作業端末

jacob@fel.t.u-tokyo.ac.jp

## 11. 予定作業時間

undefined

## 12. その他制約事項・備考

- 海技研・産総研で行われた実験条件に基づいてシミュレーションを実行している。これらのGrid数や刻み幅・時間は計算機の制約から逆算して考えており、あまり変更しないことを勧める。また、数々の物性値に関しては詳細な検討・検証が必要であり、チェッカーによる承認が臨まれる。参考資料・情報に関しては[参考情報](## 13. 参考情報)を検証されたい。

## 13. 参考情報
- [参考にした書式](https://dev.classmethod.jp/articles/non-97-operation-manual/)
- [水の減衰係数に関する議論（page 218）](https://jontalle.web.engr.illinois.edu/MISC/Books/KinslerFreyCoopSanders.00.pdf)
- [ガラスの減衰係数に関する議論](https://pubs.aip.org/asa/jasa/article-pdf/123/4/EL39/14693501/el39_1_online.pdf)
- [塩ビ管の減衰係数に関する議論](https://www.ondacorp.com/images/Plastics.pdf)

## 14. 作業実績

以下項目は、作業終了後に入力すること

### 14.1. 作業結果

#### 14.1.1. OK or NG

以下に OK or NG を記入

```text

```

#### 14.1.2. NGと判断した理由

NGだった場合、以下に NGと判断した理由 を記入

```text

```

例)

```text
手順15.5.2. で意図しないエラーが発生したため。
エラー文は以下の通り。

error error error error error error
```

#### 14.1.3. NGとなった原因

NGだった場合、以下に NGとなった原因 を記入

```text

```

例)

```text
エラー文の`error`という文言と、リソースがxxな状態であることからIAMロールの権限不足だと考える
```

#### 14.1.4. 次回アクション

NGだった場合、以下に 原因解消のために次に行うべきアクション を記入

```text

```

例)

```text
以下の流れでアクションする
1. 検証環境にて、IAMロール 'test-role' にアタッチしているIAMポリシー `test-policy` で 'xxxx'を許可するように変更する
2. NGとなった15.5.2と同様の手順を実施し、エラーが解消されていることを確認する
3. エラーが解消されたことを確認して、お客様と次回作業日時をすり合わせる
```

### 14.2. 作業開始・終了時間

以下に 作業開始・終了時間(YYYY-MM-DD HH:MM 〜 YYYY-MM-DD HH:MM) を記入

```text

```

例)

```text
2021-07-14 10:10 〜 2021-07-14 12:25
2021-07-14 14:23 〜 2021-07-14 17:30
```

## 15. 手順書

### 15.1. ログイン [想定作業時間: 3分]

- [ ] [AWSマネージメントコンソールのURL](https://console.aws.amazon.com/console/home)をクリックする。
- [ ] 以下の必要な情報を入力して`サインイン`をクリックする。
  - [ ] アカウントID: `123456789012`
  - [ ] ユーザー名: `xxxxxxxx`
  - [ ] パスワード: `自分のIAMユーザーのパスワード`
- [ ] MFAコードを入力し、`送信`をクリックする。
- [ ] マネジメントコンソール上部に、**AWS マネジメントコンソール**を大きく表示されることを確認する。

### 15.2. スイッチロール [想定作業時間: 3分]

- [ ] ブラウザの拡張機能のAWS Extend Switch Rolesから、`cm-XXX-Read`をクリックする。
- [ ] マネジメントコンソール上部のメニューの`cm-XXX-Read`をクリックし、アカウントが、XXX様SIEM on Amazon ES用のAWSアカウントIDの`123456789012`であることを確認する。
- [ ] マネジメントコンソール上部の検索バーで`Lambda`と入力し、`Lambda`をクリックする。
- [ ] `cm-yamamoto-ryota-iamRole-LU-Level-upper`をクリックする。
- [ ] `テスト`タブをクリックする。
- [ ] 以下情報を入力し、`テスト`をクリックする。
  - [ ] 名前: `LevelUpFor3Hours`
  - [ ] テキストエリア:

```json
{
  "limit": "3:00"
}
```

- **実行結果: 成功**と表示され、`詳細`をクリックすると、**YYYY-MM-DD HH:MM:SSまで権限が与えられます**といった文章が表示されることを確認する。
- [ ] ブラウザの拡張機能のAWS Extend Switch Rolesから、`cm-XXX-Read`をクリックする。
- [ ] マネジメントコンソール上部のメニューの`cm-XXX-Admin`をクリックし、アカウントが、XXX様のSIEM on Amazon ES用のAWSアカウントIDの`123456789012`であることを確認する。